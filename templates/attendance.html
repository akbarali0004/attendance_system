{% extends "base.html" %}
{% load static %}
{% load custom_tags %}

{% block extra_css %}
<link href="{% static 'css/attendance.css' %}" rel="stylesheet">
{% endblock extra_css %}

{% block title %}
{{group.name}}
{% endblock title %}

{% block content %}
<h1 style="display: inline-block;">{{group.name}}</h1>
<p style="display: inline-block;"> \ Date: {% now "d-m-Y" %}</p>
<form method="post">
    {% csrf_token %}
    <table>
        <thead>
            <tr>
                <th id="name">Ism Familiya</th>
                <th id="baho">Baho</th>
                <th id="davomat">Davomat</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td><a href="">{{student.last_name}} {{student.first_name}}</a></td>
                <td style="text-align:center;">
                    <input type="number" name="grade_{{ student.id }}" min="0" max="100" {% if attendance_dict %}value="{{ attendance_dict|default:''|get_item:student.id|default:''|get_attr:'grade' }}"{% endif %}>
                </td>
                <td style="text-align:center;">
                    <input type="checkbox" name="present_{{ student.id }}" class="attendance-checkbox" {% if not attendance_dict or attendance_dict|get_item:student.id|get_attr:'is_present' %}checked{% endif %}>
                </td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="2" style="text-align:center;">
                    <input type="submit" value="Save">
                </td>
                <td id="count-display" style="text-align:center;"><b>N ta</b></td>
            </tr>
        </tbody>
    </table>
</form>
{% endblock content %}

{% block extra_js %}
<script src="{% static 'js/attendance.js' %}"></script>
{% endblock extra_js %}