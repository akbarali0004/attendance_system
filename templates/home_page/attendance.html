{% extends "home_page/base.html" %}
{% load custom_filters %}
{% load static %}


{% block content %}
<!-- Table -->
<section class="table-container">
    <form method="post">
        {% csrf_token %}
        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th>Ism va Familiya</th>
                    <th>Baho</th>
                    <th>Davomat</th>
                    <th>Davomat (%)</th>
                    <th>Created By</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td class='student-name'><a href="">{{student.last_name}} {{student.first_name}}</a></td>
                    <td style="padding:0px;">
                        <input type="number" name="grade_{{ student.id }}" min="0" max="100" {% if attendance_dict %}value="{{ attendance_dict|default:''|get_item:student.id|default:''|get_attr:'grade' }}"{% endif %} maxlength="3" placeholder="_">
                    </td>
                    <td style="padding:0px;">
                        <input type="checkbox" name="present_{{ student.id }}" class="attendance-checkbox" {% if not attendance_dict or attendance_dict|get_item:student.id|get_attr:'is_present' %}checked{% endif %}>
                    </td>
                    <td>
                        <div class="progress-wrapper">
                            <progress value="{{ student.attendance_percent }}" max="100"></progress>
                            <span class="progress-text">{{ student.attendance_percent }}%</span>
                        </div>
                    </td>
                    <td>Qodirov J.</td>
                </tr>
                {% endfor %}
                <tr>
                    <td colspan="2" style="text-align:center;">
                        <input type="submit" value="Save" class="table-save-btn">
                    </td>
                    <td colspan="3" id="count-display"><b>N ta</b></td>
                </tr>
            </tbody>
        </table>
    </form>
</section>
{% endblock content %}

{% block extra_js %}
<script src="{% static 'js/attendance.js' %}"></script>
{% endblock extra_js %}